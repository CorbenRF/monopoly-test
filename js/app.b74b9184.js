(function(){"use strict";var e={4956:function(e,t,o){var n=o(9242),r=o(3396);function i(e,t){const o=(0,r.up)("router-view");return(0,r.wg)(),(0,r.j4)(o)}var s=o(89);const a={},l=(0,s.Z)(a,[["render",i]]);var c=l,d=o(2483);const u={class:"home"},m=(0,r._)("h1",null,"Welcome to Monopoly!",-1),p={key:0,type:"button",class:"btn btn-primary"};function y(e,t,o,n,i,s){const a=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("div",u,[m,(0,r._)("button",{type:"button",class:"btn btn-primary mb-2",onClick:t[0]||(t[0]=(...e)=>s.clearStorage&&s.clearStorage(...e))}," Start new game "),s.getStorageLength>0?((0,r.wg)(),(0,r.iD)("button",p,[(0,r.Wm)(a,{to:"/game",class:"btn-text"},{default:(0,r.w5)((()=>[(0,r.Uk)(" Continue playing ")])),_:1})])):(0,r.kq)("",!0)])}o(560);var f={name:"HomeView",data(){return{clearlc:!1}},components:{},computed:{getStorageLength(){return this.$store.getters.getStorageLength}},methods:{clearStorage(){this.clearlc=!0,window.localStorage.clear(),this.$store.replaceState({numberOfCreatedPlayers:2,historyLedger:1,playerToGo:0,screenMsg:"",players:[{id:1,name:"Игрок1",money:15e6,position:1},{id:2,name:"Игрок2",money:15e6,position:1}],history:[{id:1,timestamp:(new Date).toLocaleTimeString(),event:"Игра началась!"}],positions:[1e7,-3e6,-2e5,321e3,-5e6,5e5,-11e6,1e7,-25e6,-25e3,5e3,1e6,-5e5,15e5,-111e3,-5e5,123e3,2e6,-4e6,0]}),this.$router.push("/game")}}};const g=(0,s.Z)(f,[["render",y]]);var h=g;const v={class:"view container"},_={class:"main-row row row-cols-3"},b={class:"col-3 stats"},w={class:"col-6"},S={class:"col-3 stats"};function M(e,t,o,n,i,s){const a=(0,r.up)("ScoreBoard"),l=(0,r.up)("InfoScreen"),c=(0,r.up)("GameBoard"),d=(0,r.up)("HistoryBoard");return(0,r.wg)(),(0,r.iD)("div",v,[(0,r._)("div",_,[(0,r._)("div",b,[(0,r.Wm)(a)]),(0,r._)("div",w,[(0,r.Wm)(l),(0,r.Wm)(c)]),(0,r._)("div",S,[(0,r.Wm)(d)])])])}const T={class:"board__wrapper"},$={class:"tiles__toprow"},k={class:"tiles__mid"},P={class:"tiles__midleft"},W={class:"board__control"},D={class:"tiles__midright"},G={class:"tiles__botrow"};function I(e,t,o,n,i,s){const a=(0,r.up)("BoardTile"),l=(0,r.up)("ControlsPanel");return(0,r.wg)(),(0,r.iD)("div",T,[(0,r._)("div",$,[(0,r.Wm)(a,{id:"16",effect:"-500000",direction:"horizontal"}),(0,r.Wm)(a,{id:"17",effect:"123000",direction:"horizontal"}),(0,r.Wm)(a,{id:"18",effect:"2000000",direction:"horizontal"}),(0,r.Wm)(a,{id:"19",effect:"-4000000",direction:"horizontal"}),(0,r.Wm)(a,{id:"20",effect:"0",direction:"horizontal"}),(0,r.Wm)(a,{id:"1",effect:"10000000",direction:"horizontal"})]),(0,r._)("div",k,[(0,r._)("div",P,[(0,r.Wm)(a,{id:"15",effect:"-111000",direction:"vertical"}),(0,r.Wm)(a,{id:"14",effect:"1500000",direction:"vertical"}),(0,r.Wm)(a,{id:"13",effect:"-500000",direction:"vertical"}),(0,r.Wm)(a,{id:"12",effect:"1000000",direction:"vertical"})]),(0,r._)("div",W,[(0,r.Wm)(l)]),(0,r._)("div",D,[(0,r.Wm)(a,{id:"2",effect:"-3000000",direction:"vertical"}),(0,r.Wm)(a,{id:"3",effect:"-200000",direction:"vertical"}),(0,r.Wm)(a,{id:"4",effect:"321000",direction:"vertical"}),(0,r.Wm)(a,{id:"5",effect:"-5000000",direction:"vertical"})])]),(0,r._)("div",G,[(0,r.Wm)(a,{id:"11",effect:"5000",direction:"horizontal"}),(0,r.Wm)(a,{id:"10",effect:"-25000",direction:"horizontal"}),(0,r.Wm)(a,{id:"9",effect:"-25000000",direction:"horizontal"}),(0,r.Wm)(a,{id:"8",effect:"10000000",direction:"horizontal"}),(0,r.Wm)(a,{id:"7",effect:"-11000000",direction:"horizontal"}),(0,r.Wm)(a,{id:"6",effect:"500000",direction:"horizontal"})])])}const C={class:"control__wrapper"},z={class:"control__panel"},O=(0,r._)("h3",null,"Управление",-1),L={class:"control__btns"};function x(e,t,o,n,i,s){const a=(0,r.up)("dialogueModal");return(0,r.wg)(),(0,r.iD)("div",C,[(0,r._)("div",z,[O,(0,r._)("div",L,[(0,r._)("button",{type:"button",class:"btn btn-success",onClick:t[0]||(t[0]=(...e)=>s.makeMove&&s.makeMove(...e))},"Сделать ход"),(0,r._)("button",{type:"button",class:"btn btn-warning",onClick:t[1]||(t[1]=e=>this.modalVisible=!0)}," Перевод средств"),(0,r._)("button",{type:"button",class:"btn btn-danger",onClick:t[2]||(t[2]=(...e)=>s.endTurn&&s.endTurn(...e))},"Закончить ход"),(0,r._)("button",{type:"button",class:"btn btn-secondary",onClick:t[3]||(t[3]=(...e)=>s.addPlayer&&s.addPlayer(...e))},"Добавить игрока")])]),this.modalVisible?((0,r.wg)(),(0,r.j4)(a,{key:0,onClose:s.closeModal,onSend:s.makeTrade},null,8,["onClose","onSend"])):(0,r.kq)("",!0)])}var j=o(7139);const B={class:"modal-custom-confirm container-md"},Z={class:"dialogue__modal"},H=(0,r._)("span",{class:"dialogue__modal-msg"},[(0,r.Uk)("Выберете игрока для перевода средств: "),(0,r._)("span",{class:"dialogue__modal-bold"})],-1),V=["value"],U={class:"form-control"},E=(0,r._)("span",{class:"input-group-text"},"Миллионов",-1),F=["disabled","max"],K={class:"form-control"},N=(0,r._)("span",{class:"input-group-text"},"Тысяч",-1),Y=["disabled","max"],q={class:"buttons-group"};function A(e,t,o,i,s,a){return(0,r.wg)(),(0,r.iD)("div",{class:"backdrop-confirm",onClick:t[5]||(t[5]=(0,n.iM)((t=>e.$emit("close")),["self"])),onKeydown:t[6]||(t[6]=(0,n.D2)((t=>e.$emit("close")),["esc"]))},[(0,r._)("div",B,[(0,r.WI)(e.$slots,"default",{class:"modal-custom-confirm__message"},(()=>[(0,r._)("div",Z,[H,(0,r.wy)((0,r._)("select",{name:"players",id:"players","onUpdate:modelValue":t[0]||(t[0]=e=>this.selectedPlayerId=e)},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.playersInfo,(e=>((0,r.wg)(),(0,r.iD)("option",{key:e.id,value:e.id},(0,j.zw)(e.name),9,V)))),128))],512),[[n.bM,this.selectedPlayerId]]),(0,r._)("div",U,[E,(0,r.wy)((0,r._)("input",{type:"number",disabled:!this.selectedPlayerId,min:"0",max:a.availableFunds(this.selectedPlayerId)/1e6,"onUpdate:modelValue":t[1]||(t[1]=e=>this.millions=e)},null,8,F),[[n.nr,this.millions]])]),(0,r._)("div",K,[N,(0,r.wy)((0,r._)("input",{type:"number",disabled:!this.selectedPlayerId,min:"0",max:a.availableFunds(this.selectedPlayerId)/1e3,"onUpdate:modelValue":t[2]||(t[2]=e=>this.thousands=e)},null,8,Y),[[n.nr,this.thousands]])])])])),(0,r._)("div",q,[(0,r._)("button",{type:"button",class:"btn btn-success",onClick:t[3]||(t[3]=t=>e.$emit("send",{receipient:s.selectedPlayerId,amount:this.sumToSend}))},"ОК"),(0,r._)("button",{type:"button",class:"btn btn-dark",onClick:t[4]||(t[4]=t=>e.$emit("close"))},"Отмена")])])],32)}var J={data(){return{selectedPlayerId:"",millions:0,thousands:0}},computed:{sumToSend(){return 1e6*this.millions+1e3*this.thousands},currentPlayerInfo(){return this.$store.getters.getCurrentPlayer},playersInfo(){return this.$store.getters.getPlayers.filter((e=>e.id!==this.currentPlayerInfo.id))}},methods:{availableFunds(e){return e?this.$store.getters.getPlayers.find((t=>t.id===e)).money:0}}};const R=(0,s.Z)(J,[["render",A]]);var Q=R,X={data(){return{modalVisible:!1}},components:{dialogueModal:Q},methods:{endTurn(){this.$store.dispatch("endCurrentTurn")},addPlayer(){this.$store.dispatch("addPlayer")},makeTrade(e){this.$store.dispatch("makeTrade",e),this.closeModal()},makeMove(){this.$store.dispatch("makeMove")},closeModal(){this.modalVisible=!1}}};const ee=(0,s.Z)(X,[["render",x]]);var te=ee;const oe={class:"tile__content"};function ne(e,t,o,n,i,s){return(0,r.wg)(),(0,r.iD)("div",{class:(0,j.C_)(["tile",[`${o.direction}`]])},[(0,r.Uk)((0,j.zw)(o.id)+" ",1),(0,r._)("div",oe,[(0,r.WI)(e.$slots,"default",{},(()=>[(0,r._)("span",null,(0,j.zw)(this.effectNum),1)])),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(s.isOccupiedByPlayer,(e=>((0,r.wg)(),(0,r.iD)("span",{class:"tile__position",key:e.id},(0,j.zw)(e.name),1)))),128))])],2)}var re={props:["direction","id","effect"],computed:{effectNum(){const e=new Intl.NumberFormat("ru-RU").format(this.effect);return e},isOccupiedByPlayer(){let e=[];return this.$store.getters.getPlayers.forEach((t=>{t.position==this.id&&e.push(t)})),e}}};const ie=(0,s.Z)(re,[["render",ne]]);var se=ie,ae={components:{ControlsPanel:te,BoardTile:se}};const le=(0,s.Z)(ae,[["render",I]]);var ce=le;const de={class:"history__wrapper"},ue=(0,r._)("h3",null,"История",-1),me={class:"history__list"};function pe(e,t,o,n,i,s){return(0,r.wg)(),(0,r.iD)("div",de,[ue,(0,r._)("ol",me,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(s.historyInfo,(e=>((0,r.wg)(),(0,r.iD)("li",{key:e.id},(0,j.zw)(e.timestamp)+" - "+(0,j.zw)(e.event),1)))),128))])])}var ye={computed:{historyInfo(){return this.$store.getters.getHistory}}};const fe=(0,s.Z)(ye,[["render",pe]]);var ge=fe;const he={class:"score__wrapper"},ve=(0,r._)("h3",null,"СЧЁТ",-1);function _e(e,t,o,n,i,s){return(0,r.wg)(),(0,r.iD)("div",he,[ve,(0,r._)("ol",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(s.playersInfo,(e=>((0,r.wg)(),(0,r.iD)("li",{key:e.id},(0,j.zw)(e.name)+": "+(0,j.zw)(this.formatSum(e.money))+" монет",1)))),128))])])}o(2894);var be={methods:{formatSum(e){let t="",o=e;e<0&&(t+="-",o*=-1);const n=Math.floor(o/1e6),r=Math.floor(o%1e6/1e3);return n>0&&(t+=`${n} ${this.pluralize(n,"миллион","миллиона","миллионов")} `),(r>0||0===n)&&(t+=`${r} ${this.pluralize(r,"тысяча","тысячи","тысяч")}`),t.trim()},pluralize(e,t,o,n){let r=Math.abs(e);return r%=100,r>=5&&r<=20?n:(r%=10,1===r?t:r>=2&&r<=4?o:n)}}};const we=be;var Se=we,Me={mixins:[Se],computed:{playersInfo(){const e=this.$store.getters.getPlayers;return e.toSorted(((e,t)=>e.money>t.money?-1:e.money<t.money?1:0))}}};const Te=(0,s.Z)(Me,[["render",_e]]);var $e=Te;const ke={class:"screen__wrapper"};function Pe(e,t,o,n,i,s){return(0,r.wg)(),(0,r.iD)("div",ke,[(0,r._)("h4",null,(0,j.zw)(s.getScreenMsg),1)])}var We={computed:{getScreenMsg(){return this.$store.getters.getScreen}}};const De=(0,s.Z)(We,[["render",Pe]]);var Ge=De,Ie={components:{GameBoard:ce,HistoryBoard:ge,ScoreBoard:$e,InfoScreen:Ge}};const Ce=(0,s.Z)(Ie,[["render",M]]);var ze=Ce;const Oe=[{path:"/",name:"home",component:h},{path:"/game",name:"game",component:ze}],Le=(0,d.p7)({history:(0,d.PO)("/monopoly-test/"),routes:Oe});var xe=Le,je=o(65);function Be(e,t,o,n){let r=Math.abs(e);return r%=100,r>=5&&r<=20?n:(r%=10,1===r?t:r>=2&&r<=4?o:n)}function Ze(e){let t="",o=e;e<0&&(t+="-",o*=-1);const n=Math.floor(o/1e6),r=Math.floor(o%1e6/1e3);return n>0&&(t+=`${n} ${Be(n,"миллион","миллиона","миллионов")} `),(r>0||0===n)&&(t+=`${r} ${Be(r,"тысяча","тысячи","тысяч")}`),t.trim()}var He=(0,je.MT)({state:localStorage.getItem("gameState")?JSON.parse(localStorage.getItem("gameState")):{numberOfCreatedPlayers:2,historyLedger:1,playerToGo:0,screenMsg:"",players:[{id:1,name:"Игрок1",money:15e6,position:1},{id:2,name:"Игрок2",money:15e6,position:1}],history:[{id:1,timestamp:(new Date).toLocaleTimeString(),event:"Игра началась!"}],positions:[1e7,-3e6,-2e5,321e3,-5e6,5e5,-11e6,1e7,-25e6,-25e3,5e3,1e6,-5e5,15e5,-111e3,-5e5,123e3,2e6,-4e6,0]},getters:{getStorageLength(){return localStorage.getItem("gameState")?localStorage.getItem("gameState").length:0},getPlayers(e){return e.players},getHistory(e){return e.history},getCurrentPlayer(e){return e.players[e.playerToGo]},getPlayerToGo(e){return e.playerToGo},getScreen(e){return e.screenMsg?e.screenMsg:`Ход игрока ${e.players[e.playerToGo].name}!`}},mutations:{SaveGame(e){localStorage.setItem("gameState",JSON.stringify(e))},EndTurn(e){if(e.playerToGo<e.players.length){const t={id:++e.historyLedger,timestamp:(new Date).toLocaleTimeString(),event:`Ход игрока ${e.players[e.playerToGo].name} окончен!`};e.history.push(t),e.screenMsg=t.event}++e.playerToGo>=e.players.length&&(e.playerToGo=0),e.screenMsg+=` Ход игрока ${e.players[e.playerToGo].name}!`},AddPlayer(e){e.players.push({id:++e.numberOfCreatedPlayers,name:`Игрок${e.numberOfCreatedPlayers}`,money:15e6,position:1}),e.screenMsg=`Игрок${e.numberOfCreatedPlayers} добавлен в игру!`;const t={id:++e.historyLedger,timestamp:(new Date).toLocaleTimeString(),event:e.screenMsg};e.history.push(t)},MakeTrade(e,t){e.players[e.playerToGo].money-=t.amount,e.players.find((e=>e.id==t.receipient)).money+=t.amount,e.screenMsg=`${e.players[e.playerToGo].name} переводит ${Ze(t.amount)} монет игроку ${e.players.find((e=>e.id==t.receipient)).name}`;const o={id:++e.historyLedger,timestamp:(new Date).toLocaleTimeString(),event:e.screenMsg};e.history.push(o)},MakeMove(e){const t=Math.floor(6*Math.random())+1,o=e.players[e.playerToGo];o.position+t>20?o.position=o.position-20+t:o.position+=t,e.screenMsg=`${o.name} бросает ${t} и встает на поле ${o.position}`;const n={id:++e.historyLedger,timestamp:(new Date).toLocaleTimeString(),event:e.screenMsg};e.history.push(n),o.money+=e.positions[o.position-1];const r=Ze(e.positions[o.position-1]);e.screenMsg=`${o.name} ${e.positions[o.position-1]>=0?"получает":"теряет"} ${r} монет, встав на поле ${o.position}`;const i={id:++e.historyLedger,timestamp:(new Date).toLocaleTimeString(),event:e.screenMsg};if(e.history.push(i),o.money<=-5e6){e.screenMsg=`${o.name} Проиграл и выбыл из игры!`;const t={id:++e.historyLedger,timestamp:(new Date).toLocaleTimeString(),event:e.screenMsg};e.history.push(t),e.players=e.players.filter((e=>e.id!==o.id)),e.playerToGo=e.playerToGo>0?e.playerToGo-1:0}}},actions:{saveGame({commit:e}){e("SaveGame"),console.log("game saved!")},clearStorage(){localStorage.clear()},endCurrentTurn({commit:e}){e("EndTurn"),this.dispatch("saveGame")},addPlayer({commit:e}){e("AddPlayer"),this.dispatch("saveGame")},makeTrade({commit:e},t){e("MakeTrade",t),this.dispatch("saveGame")},makeMove({commit:e}){e("MakeMove"),e("EndTurn"),this.dispatch("saveGame")}},modules:{}});o(2166);(0,n.ri)(c).use(He).use(xe).mount("#app")}},t={};function o(n){var r=t[n];if(void 0!==r)return r.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,o),i.exports}o.m=e,function(){var e=[];o.O=function(t,n,r,i){if(!n){var s=1/0;for(d=0;d<e.length;d++){n=e[d][0],r=e[d][1],i=e[d][2];for(var a=!0,l=0;l<n.length;l++)(!1&i||s>=i)&&Object.keys(o.O).every((function(e){return o.O[e](n[l])}))?n.splice(l--,1):(a=!1,i<s&&(s=i));if(a){e.splice(d--,1);var c=r();void 0!==c&&(t=c)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[n,r,i]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};o.O.j=function(t){return 0===e[t]};var t=function(t,n){var r,i,s=n[0],a=n[1],l=n[2],c=0;if(s.some((function(t){return 0!==e[t]}))){for(r in a)o.o(a,r)&&(o.m[r]=a[r]);if(l)var d=l(o)}for(t&&t(n);c<s.length;c++)i=s[c],o.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return o.O(d)},n=self["webpackChunkmonopoly"]=self["webpackChunkmonopoly"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=o.O(void 0,[998],(function(){return o(4956)}));n=o.O(n)})();
//# sourceMappingURL=app.b74b9184.js.map